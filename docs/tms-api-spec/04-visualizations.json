{
  "visualizations": {
    "description": "Chart generation and data endpoints",
    "problem": "Currently TeamOS generates images then uses GPT-4 Vision to extract the data back out. We need the raw data alongside images.",
    "solution": "Return both image AND structured data for each chart type",
    
    "currentEndpoints": {
      "/GetGraph": {
        "method": "GET",
        "description": "Current endpoint that only returns PNG images",
        "queryFormat": "?{chartType}&{param1}={value1}&{param2}={value2}...",
        "examples": {
          "tmpWheel": "/GetGraph?CreateTMPQWheel&mr=8&rr1=7&rr2=5",
          "qo2Model": "/GetGraph?CreateQO2Model&gva=38&pav=33&ov=48&tv=70&povn=53&enq=0.9",
          "teamSignals": "/GetGraph?CreateTeamSignals&colors=amber|red|amber|amber|red|red|amber|amber"
        },
        "response": {
          "type": "image/png",
          "content": "Binary PNG data"
        }
      }
    },
    
    "recommendedEndpoints": {
      "/api/v2/charts/{chartType}": {
        "method": "POST",
        "description": "Generate chart with both image AND structured data",
        "headers": {
          "Authorization": "Bearer {token}"
        },
        "request": {
          "examples": {
            "tmpWheel": {
              "chartType": "tmp-wheel",
              "parameters": {
                "majorRole": 8,
                "relatedRole1": 7,
                "relatedRole2": 5
              }
            },
            "qo2Model": {
              "chartType": "qo2-model", 
              "parameters": {
                "groupValue": 38,
                "personalAchievement": 33,
                "organizationalValue": 48,
                "taskValue": 70,
                "powerValue": 53,
                "enq": 0.9
              }
            },
            "teamSignals": {
              "chartType": "team-signals",
              "parameters": {
                "signals": ["amber", "red", "amber", "amber", "red", "red", "amber", "amber"]
              }
            }
          }
        },
        "response": {
          "success": true,
          "data": {
            "chartType": "tmp-wheel",
            "image": {
              "format": "png",
              "base64": "iVBORw0KGgoAAAANSUhEUgAA...",
              "url": "/api/v2/charts/cache/chart_abc123.png"
            },
            "structuredData": {
              "description": "THE KEY DATA that eliminates need for Vision API",
              "tmpWheelExample": {
                "majorRole": {
                  "name": "Upholder Maintainer",
                  "score": 8,
                  "position": 7,
                  "color": "#54A0FF",
                  "description": "Focuses on maintaining standards and supporting team stability"
                },
                "relatedRole1": {
                  "name": "Controller Inspector", 
                  "score": 7,
                  "position": 6,
                  "color": "#FF9FF3",
                  "description": "Ensures quality control and adherence to procedures"
                },
                "relatedRole2": {
                  "name": "Thruster Organizer",
                  "score": 5,
                  "position": 3,
                  "color": "#96CEB4",
                  "description": "Drives action and organizes team efforts"
                },
                "allRoles": [
                  {"name": "Creator Innovator", "score": 3, "position": 0},
                  {"name": "Explorer Promoter", "score": 2, "position": 1},
                  {"name": "Assessor Developer", "score": 4, "position": 2},
                  {"name": "Thruster Organizer", "score": 5, "position": 3},
                  {"name": "Concluder Producer", "score": 6, "position": 4},
                  {"name": "Controller Inspector", "score": 7, "position": 5},
                  {"name": "Upholder Maintainer", "score": 8, "position": 6},
                  {"name": "Reporter Adviser", "score": 4, "position": 7}
                ],
                "ridoScores": {
                  "I": 7,
                  "C": 3,
                  "B": 5,
                  "S": 9
                }
              },
              "teamSignalsExample": {
                "signals": [
                  {
                    "name": "Purpose and Vision",
                    "status": "amber",
                    "score": 75,
                    "description": "Team has reasonable clarity on direction"
                  },
                  {
                    "name": "Goals and Strategy", 
                    "status": "red",
                    "score": 40,
                    "description": "Goals need better definition and alignment"
                  },
                  {
                    "name": "Team Roles",
                    "status": "amber",
                    "score": 62,
                    "description": "Roles are defined but could be clearer"
                  },
                  {
                    "name": "Team Processes",
                    "status": "amber",
                    "score": 68,
                    "description": "Processes exist but need optimization"
                  },
                  {
                    "name": "Team Relationships",
                    "status": "red",
                    "score": 45,
                    "description": "Relationships need strengthening"
                  },
                  {
                    "name": "Inter-team Relations",
                    "status": "red",
                    "score": 38,
                    "description": "Cross-team collaboration is weak"
                  },
                  {
                    "name": "Team Learning",
                    "status": "amber",
                    "score": 71,
                    "description": "Some learning practices in place"
                  },
                  {
                    "name": "Team Leadership",
                    "status": "amber",
                    "score": 65,
                    "description": "Leadership is present but could be stronger"
                  }
                ],
                "overallHealth": {
                  "score": 58,
                  "status": "amber",
                  "redCount": 3,
                  "amberCount": 5,
                  "greenCount": 0
                }
              }
            }
          }
        },
        "benefits": [
          "No need for GPT-4 Vision analysis",
          "Instant access to chart data for debrief",
          "Reduced costs and latency",
          "Better accuracy (no vision extraction errors)",
          "Enables rich interactions without re-parsing images"
        ]
      }
    },
    
    "implementationNotes": {
      "backwardCompatibility": "Keep /GetGraph working as-is for legacy integrations",
      "internalLogic": "When generating charts, TMS already has the data - just return it",
      "chartTypes": {
        "tmp-wheel": {
          "description": "8-role team management wheel",
          "requiredData": "Role scores and RIDO calculations"
        },
        "qo2-model": {
          "description": "Organizational values 3D model",
          "requiredData": "5 dimension scores plus ENQ"
        },
        "team-signals": {
          "description": "8 traffic lights for team health",
          "requiredData": "Status and scores for each dimension"
        },
        "wow-chart": {
          "description": "Ways of Working preferences",
          "requiredData": "Preference scores across dimensions"
        },
        "llp-graph": {
          "description": "Leadership Learning Profile",
          "requiredData": "Learning style scores and preferences"
        }
      }
    }
  }
}