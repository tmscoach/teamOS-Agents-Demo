{
  "visualizations": {
    "description": "Flexible visualization API that returns both images and comprehensive structured data",
    "overview": "Single endpoint generates any chart type with full data alongside the image, eliminating GPT-4 Vision dependency and enabling rich vector embeddings",
    
    "endpoints": {
      "/api/v2/visualizations": {
        "method": "POST",
        "description": "Generate any visualization type with complete contextual data",
        "headers": {
          "Authorization": "Bearer {token}"
        },
        "request": {
          "body": {
            "subscriptionId": "sub_xyz789",
            "chartType": "CreateTMPQWheel|CreateQO2Model|CreateTeamSignals|CreateWoWMatrix|CreateLLPProfile|CreateTMPQIntroWheel|CreateTMPQRido|CreateTMPQPreferenceWheel|CreateTMPQRidoSummary",
            "params": {
              "_comment": "Dynamic parameters based on chartType",
              "_examples": {
                "CreateTMPQWheel": { "mr": "8", "rr1": "7", "rr2": "5" },
                "CreateQO2Model": { "gva": "38", "pav": "33", "ov": "48", "tv": "70", "povn": "53", "enq": "0.9", "clear": "yes" },
                "CreateTeamSignals": { "colors": "amber|red|amber|amber|red|red|amber|amber" },
                "CreateTMPQRido": { "lv": "15", "rv": "22", "lt": "Extrovert", "rt": "Introvert", "ll": "E", "rl": "I", "clear": "yes" }
              }
            }
          }
        },
        "response": {
          "success": true,
          "data": {
            "metadata": {
              "subscriptionId": "sub_xyz789",
              "workflowType": "TMP",
              "completedAt": "2024-01-06T10:30:00Z",
              "chartType": "CreateTMPQWheel",
              "generatedAt": "2024-01-06T11:00:00Z"
            },
            "image": {
              "format": "png",
              "base64": "iVBORw0KGgoAAAANSUhEUgAA...",
              "width": 800,
              "height": 800
            },
            "data": {
              "_comment": "Structure varies by chartType - see examples below"
            }
          }
        }
      }
    },
    
    "dataStructureExamples": {
      "CreateTMPQWheel": {
        "description": "TMP wheel with 8 role segments and complete profile analysis",
        "inputParams": {
          "mr": "Major role score (0-10)",
          "rr1": "Related role 1 score (0-10)",
          "rr2": "Related role 2 score (0-10)"
        },
        "outputData": {
          "title": "Team Management Profile Wheel",
          "description": "8-segment circular chart showing team role preferences",
          "majorRole": {
            "name": "Upholder Maintainer",
            "code": "UM",
            "score": 8,
            "position": 6,
            "color": "#00aee5",
            "percentage": 19,
            "description": "Focuses on maintaining standards and supporting team stability",
            "strengths": ["Attention to detail", "Maintaining standards", "Following procedures"],
            "weaknesses": ["May resist change", "Can be overly cautious"],
            "workStyle": "Methodical and systematic approach to tasks"
          },
          "relatedRoles": [
            {
              "name": "Controller Inspector",
              "code": "CI",
              "score": 7,
              "position": 5,
              "color": "#007ac2",
              "percentage": 15,
              "relationship": "Controlling and inspecting preferences complement maintaining style"
            },
            {
              "name": "Thruster Organizer",
              "code": "TO",
              "score": 5,
              "position": 3,
              "color": "#ec008c",
              "percentage": 14,
              "relationship": "Organizing abilities help maintain systems effectively"
            }
          ],
          "allSegments": [
            {"name": "Reporter Adviser", "position": 0, "color": "#009a67", "percentage": 10},
            {"name": "Creator Innovator", "position": 1, "color": "#9bcd66", "percentage": 9},
            {"name": "Explorer Promoter", "position": 2, "color": "#fff200", "percentage": 11},
            {"name": "Assessor Developer", "position": 3, "color": "#f9a13a", "percentage": 8},
            {"name": "Thruster Organizer", "position": 4, "color": "#ec008c", "percentage": 14},
            {"name": "Concluder Producer", "position": 5, "color": "#9b5ba4", "percentage": 14},
            {"name": "Controller Inspector", "position": 6, "color": "#007ac2", "percentage": 15},
            {"name": "Upholder Maintainer", "position": 7, "color": "#00aee5", "percentage": 19}
          ],
          "workPreferenceDistribution": {
            "advising": 10,
            "innovating": 9,
            "promoting": 11,
            "developing": 8,
            "organizing": 14,
            "producing": 14,
            "inspecting": 15,
            "maintaining": 19
          },
          "teamBalance": {
            "analysis": "Right-side dominant profile indicating preference for structure and control",
            "gaps": ["Creative innovation", "Information gathering", "Risk-taking"],
            "recommendations": [
              "Partner with Creator Innovators for new ideas",
              "Collaborate with Explorer Promoters for opportunities",
              "Balance team with left-side dominant profiles"
            ]
          }
        }
      },
      
      "CreateTeamSignals": {
        "description": "8-dimension team health traffic light visualization",
        "inputParams": {
          "colors": "Pipe-separated list of 8 colors (green|amber|red)"
        },
        "outputData": {
          "title": "Team Signals Assessment",
          "description": "Traffic light visualization showing team health across 8 critical dimensions",
          "dimensions": [
            {
              "name": "Purpose and Vision",
              "position": 0,
              "status": "amber",
              "score": 56,
              "color": "#FFA500",
              "interpretation": "Team has reasonable clarity on direction but needs alignment",
              "detailedAnalysis": {
                "summary": "Team members know what work team members prefer to do",
                "strengths": ["Most understand basic purpose", "Vision is documented"],
                "improvements": ["Some unclear on organizational vision alignment", "Purpose could be more inspiring"],
                "recommendations": ["Run team purpose workshop", "Create visual reminders of vision"],
                "questionsAddressed": [
                  "Do team members know what work each person prefers?",
                  "Do team members understand different personal values?",
                  "Does the team value diversity?"
                ]
              }
            },
            {
              "name": "Goals and Strategy",
              "position": 1,
              "status": "red",
              "score": 31,
              "color": "#FF0000",
              "interpretation": "Goals need better definition and team alignment",
              "detailedAnalysis": {
                "summary": "Team doesn't know enough about its current capabilities",
                "strengths": ["Some high-level goals exist"],
                "improvements": ["Goals not SMART", "No clear strategy", "Individual goals not aligned"],
                "recommendations": ["Urgent: Schedule goal-setting session", "Create goal tracking dashboard"],
                "questionsAddressed": [
                  "Is there satisfactory team balance?",
                  "Does the team see opportunities ahead?",
                  "Is the team aware of its strengths and weaknesses?"
                ]
              }
            }
          ],
          "overallHealth": {
            "score": 58,
            "status": "amber",
            "trend": "stable",
            "interpretation": "Team functioning but has significant areas needing attention",
            "distribution": {
              "green": {"count": 0, "percentage": 0, "interpretation": "No areas fully optimized"},
              "amber": {"count": 5, "percentage": 62.5, "interpretation": "Most areas need moderate improvement"},
              "red": {"count": 3, "percentage": 37.5, "interpretation": "Critical areas requiring urgent attention"}
            },
            "priorityActions": [
              "Address red areas first: Goals and Strategy, Team Relationships, Inter-team Relations",
              "Maintain momentum in amber areas while improving",
              "Celebrate any green areas as team strengths"
            ]
          }
        }
      },
      
      "CreateQO2Model": {
        "description": "3D organizational values model with opportunity/obstacle quotient",
        "inputParams": {
          "gva": "Group Achievement Value (0-100)",
          "pav": "Personal Achievement Value (0-100)",
          "ov": "Organizational Value (0-100)",
          "tv": "Task Value (0-100)",
          "povn": "Power Value Normalized (0-100)",
          "enq": "Energy Quotient (0-2)",
          "clear": "Clear background (yes/no)"
        },
        "outputData": {
          "title": "QO2 Organizational Values Model",
          "description": "3D representation of organizational values and opportunity/obstacle balance",
          "dimensions": {
            "groupAchievement": {
              "score": 38,
              "label": "Group Achievement Value",
              "interpretation": "Moderate preference for collective success",
              "description": "The extent to which team achievements are valued over individual accomplishments"
            },
            "personalAchievement": {
              "score": 33,
              "label": "Personal Achievement Value",
              "interpretation": "Lower emphasis on individual recognition",
              "description": "Drive for individual accomplishment and personal success"
            },
            "organizational": {
              "score": 48,
              "label": "Organizational Value",
              "interpretation": "Balanced commitment to company goals",
              "description": "Alignment with organizational objectives and structures"
            },
            "task": {
              "score": 70,
              "label": "Task Value",
              "interpretation": "Strong focus on task completion",
              "description": "Emphasis on getting work done efficiently and effectively"
            },
            "power": {
              "score": 53,
              "label": "Power/Influence Value",
              "interpretation": "Moderate desire for influence",
              "description": "Interest in leading and influencing others"
            }
          },
          "quotient": {
            "opportunities": 65,
            "obstacles": 35,
            "ratio": 1.86,
            "interpretation": "Opportunity-focused with 1.86:1 opportunity to obstacle ratio",
            "profile": {
              "type": "Task-Driven Optimist",
              "description": "Sees opportunities to achieve through focused task completion",
              "characteristics": [
                "Future-oriented thinking",
                "Solution-focused approach",
                "Persistent in face of challenges"
              ]
            }
          },
          "recommendations": [
            "Leverage task focus to drive team results",
            "Balance task emphasis with people considerations",
            "Use optimistic outlook to inspire team members"
          ]
        }
      },
      
      "CreateTMPQRido": {
        "description": "Work preference measure bar chart (RIDO - Relationships, Information, Decisions, Organization)",
        "inputParams": {
          "lv": "Left value (0-30)",
          "rv": "Right value (0-30)",
          "lt": "Left title (e.g., 'Extrovert')",
          "rt": "Right title (e.g., 'Introvert')",
          "ll": "Left label (e.g., 'E')",
          "rl": "Right label (e.g., 'I')",
          "clear": "Clear background"
        },
        "outputData": {
          "title": "Work Preference Measure",
          "dimension": "Relationships",
          "leftPreference": {
            "label": "Extrovert",
            "score": 15,
            "percentage": 40.5,
            "interpretation": "Moderate preference for external interaction"
          },
          "rightPreference": {
            "label": "Introvert",
            "score": 22,
            "percentage": 59.5,
            "interpretation": "Stronger preference for internal reflection"
          },
          "netScore": {
            "value": 7,
            "direction": "Introvert",
            "interpretation": "Net introvert preference of 7 points"
          }
        }
      },
      
      "CreateTMPQIntroWheel": {
        "description": "Simplified TMP wheel for introduction section showing major and related roles",
        "inputParams": {
          "mr": "Major role score (0-10)",
          "rr1": "Related role 1 score (0-10)",
          "rr2": "Related role 2 score (0-10)"
        },
        "outputData": {
          "title": "Team Management Profile Introduction Wheel",
          "description": "Simplified wheel highlighting the three key roles",
          "majorRole": {
            "name": "Upholder Maintainer",
            "position": 6,
            "score": 8,
            "highlighted": true,
            "color": "#00aee5"
          },
          "relatedRoles": [
            {
              "name": "Controller Inspector",
              "position": 5,
              "score": 7,
              "highlighted": true,
              "color": "#007ac2"
            },
            {
              "name": "Thruster Organizer",
              "position": 3,
              "score": 5,
              "highlighted": true,
              "color": "#ec008c"
            }
          ],
          "otherRoles": [
            {"name": "Reporter Adviser", "position": 0, "highlighted": false},
            {"name": "Creator Innovator", "position": 1, "highlighted": false},
            {"name": "Explorer Promoter", "position": 2, "highlighted": false},
            {"name": "Assessor Developer", "position": 3, "highlighted": false},
            {"name": "Concluder Producer", "position": 4, "highlighted": false}
          ]
        }
      },
      
      "CreateTMPQPreferenceWheel": {
        "description": "Work preference distribution wheel showing percentages across 8 work types",
        "inputParams": {
          "advi": "Advising percentage",
          "inno": "Innovating percentage",
          "prom": "Promoting percentage",
          "deve": "Developing percentage",
          "orga": "Organizing percentage",
          "prod": "Producing percentage",
          "insp": "Inspecting percentage",
          "main": "Maintaining percentage",
          "linker": "Show linker in center (yes/no)"
        },
        "outputData": {
          "title": "Work Preference Distribution",
          "description": "Percentage distribution across all 8 types of work",
          "segments": [
            {"type": "Advising", "percentage": 10, "color": "#009a67", "barWidth": 56},
            {"type": "Innovating", "percentage": 9, "color": "#9bcd66", "barWidth": 50},
            {"type": "Promoting", "percentage": 11, "color": "#fff200", "barWidth": 60},
            {"type": "Developing", "percentage": 8, "color": "#f9a13a", "barWidth": 44},
            {"type": "Organizing", "percentage": 14, "color": "#ec008c", "barWidth": 75},
            {"type": "Producing", "percentage": 14, "color": "#9b5ba4", "barWidth": 75},
            {"type": "Inspecting", "percentage": 15, "color": "#007ac2", "barWidth": 79},
            {"type": "Maintaining", "percentage": 19, "color": "#00aee7", "barWidth": 100}
          ],
          "analysis": {
            "highest": {"type": "Maintaining", "percentage": 19},
            "lowest": {"type": "Developing", "percentage": 8},
            "gap": 11,
            "interpretation": "Strong preference for maintaining with 11-point gap to developing",
            "balance": "Right-side dominant indicating preference for structure and control"
          },
          "showLinker": true
        }
      },
      
      "CreateTMPQRidoSummary": {
        "description": "Combined RIDO summary showing all four work preference measures",
        "inputParams": {
          "e": "Extrovert raw score",
          "i": "Introvert raw score",
          "p": "Practical raw score",
          "c": "Creative raw score",
          "a": "Analytical raw score",
          "b": "Beliefs raw score",
          "s": "Structured raw score",
          "f": "Flexible raw score",
          "el": "Extrovert label",
          "il": "Introvert label",
          "pl": "Practical label",
          "cl": "Creative label",
          "al": "Analytical label",
          "bl": "Beliefs label",
          "sl": "Structured label",
          "fl": "Flexible label",
          "clear": "Clear background"
        },
        "outputData": {
          "title": "RIDO Work Preference Summary",
          "description": "Complete profile across all four work preference dimensions",
          "dimensions": [
            {
              "name": "Relationships",
              "leftLabel": "Extrovert",
              "rightLabel": "Introvert",
              "leftScore": 15,
              "rightScore": 22,
              "netScore": 7,
              "netDirection": "Introvert",
              "interpretation": "Prefers working quietly and independently"
            },
            {
              "name": "Information",
              "leftLabel": "Practical",
              "rightLabel": "Creative",
              "leftScore": 19,
              "rightScore": 22,
              "netScore": 3,
              "netDirection": "Creative",
              "interpretation": "Slight preference for innovative and conceptual thinking"
            },
            {
              "name": "Decisions",
              "leftLabel": "Analytical",
              "rightLabel": "Beliefs",
              "leftScore": 17,
              "rightScore": 22,
              "netScore": 5,
              "netDirection": "Beliefs",
              "interpretation": "Makes decisions based on values and convictions"
            },
            {
              "name": "Organization",
              "leftLabel": "Structured",
              "rightLabel": "Flexible",
              "leftScore": 23,
              "rightScore": 14,
              "netScore": 9,
              "netDirection": "Structured",
              "interpretation": "Strong preference for organized and systematic approach"
            }
          ],
          "profile": {
            "code": "ICBS",
            "interpretation": "Introvert-Creative-Beliefs-Structured profile",
            "majorRole": "Upholder Maintainer",
            "description": "This combination typically leads to Upholder Maintainer role preference"
          }
        }
      }
    },
    
    "benefits": {
      "unified": "Single flexible endpoint handles all chart types",
      "dataRich": "Returns complete contextual data alongside images",
      "vectorReady": "Structured data perfect for chunking and vector embeddings",
      "aiOptimized": "Eliminates GPT-4 Vision API calls and processing delays",
      "maintainable": "New chart types added without API changes",
      "comprehensive": "Includes interpretations, recommendations, and detailed analysis"
    },
    
    "implementation": {
      "phase1": "Implement /api/v2/visualizations alongside existing /GetGraph",
      "phase2": "Return structured data extracted from existing report generation logic",
      "phase3": "Deprecate old /GetGraph endpoint after migration",
      "notes": [
        "TMS Global already has all this data when generating charts",
        "Extract data from existing report generation code",
        "No need to change chart generation engine, just return additional data"
      ]
    }
  }
}